/*
 * Generated by MyEclipse Struts
 * Template path: templates/java/JavaClass.vtl
 */
package com.mm.struts.corpo.action;

import java.io.IOException;
import java.util.Vector;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

import org.apache.struts.action.Action;
import org.apache.struts.action.ActionError;
import org.apache.struts.action.ActionErrors;
import org.apache.struts.action.ActionForm;
import org.apache.struts.action.ActionForward;
import org.apache.struts.action.ActionMapping;

import com.mm.core.master.RootMaster;
import com.mm.struts.corpo.form.TestquestionForm;


/** 
 * MyEclipse Struts
 * Creation date: 11-29-2007
 * 
 * XDoclet definition:
 * @struts.action validate="true"
 */
public class TestdataAction extends Action {
	/*
	 * Generated Methods
	 */

	/** 
	 * Method execute
	 * @param mapping
	 * @param form
	 * @param request
	 * @param response
	 * @return ActionForward
	 */
	protected ActionForm buildUserForm() throws Exception 
    {
		TestquestionForm tqf = new TestquestionForm();
		tqf.setTestname("");
		tqf.setTotalmarks("100");
		tqf.setQues1("");
		tqf.setQues2("");
		tqf.setQues3("");
		tqf.setQues4("");
		tqf.setQues5("");
		tqf.setQues6("");
		tqf.setQues7("");
		tqf.setQues8("");
		tqf.setQues9("");
		tqf.setQues10("");
		tqf.setQues11("");
		tqf.setQues12("");
		tqf.setQues13("");
		tqf.setQues14("");
		tqf.setQues15("");
		tqf.setQues16("");
		tqf.setQues17("");
		tqf.setQues18("");
		tqf.setQues19("");
		tqf.setQues20("");
		tqf.setQues21("");
		tqf.setQues22("");
		tqf.setQues23("");
		tqf.setQues24("");
		tqf.setQues25("");
		tqf.setQues26("");
		tqf.setQues27("");
		tqf.setQues28("");
		tqf.setQues29("");
		tqf.setQues30("");
		tqf.setQues31("");
		tqf.setQues32("");
		tqf.setQues33("");
		tqf.setQues34("");
		tqf.setQues35("");
		tqf.setQuestype1("Radio Button");
		tqf.setQuestype2("Radio Button");
		tqf.setQuestype3("Radio Button");
		tqf.setQuestype4("Radio Button");
		tqf.setQuestype5("Radio Button");
		tqf.setQuestype6("Radio Button");
		tqf.setQuestype7("Radio Button");
		tqf.setQuestype8("Radio Button");
		tqf.setQuestype9("Radio Button");
		tqf.setQuestype10("Radio Button");
		tqf.setQuestype11("Radio Button");
		tqf.setQuestype12("Radio Button");
		tqf.setQuestype13("Radio Button");
		tqf.setQuestype14("Radio Button");
		tqf.setQuestype15("Radio Button");
		tqf.setQuestype16("Radio Button");
		tqf.setQuestype17("Radio Button");
		tqf.setQuestype18("Radio Button");
		tqf.setQuestype19("Radio Button");
		tqf.setQuestype20("Radio Button");
		tqf.setQuestype21("Radio Button");
		tqf.setQuestype22("Radio Button");
		tqf.setQuestype23("Radio Button");
		tqf.setQuestype24("Radio Button");
		tqf.setQuestype25("Radio Button");
		tqf.setQuestype26("Radio Button");
		tqf.setQuestype27("Radio Button");
		tqf.setQuestype28("Radio Button");
		tqf.setQuestype29("Radio Button");
		tqf.setQuestype30("Radio Button");
		tqf.setQuestype31("Radio Button");
		tqf.setQuestype32("Radio Button");
		tqf.setQuestype33("Radio Button");
		tqf.setQuestype34("Radio Button");
		tqf.setQuestype35("Radio Button");
		tqf.setQuescheck1("0");
		tqf.setQuescheck2("0");
		tqf.setQuescheck3("0");
		tqf.setQuescheck4("0");
		tqf.setQuescheck5("0");
		tqf.setQuescheck6("0");
		tqf.setQuescheck7("0");
		tqf.setQuescheck8("0");
		tqf.setQuescheck9("0");
		tqf.setQuescheck10("0");
		tqf.setQuescheck11("0");
		tqf.setQuescheck12("0");
		tqf.setQuescheck13("0");
		tqf.setQuescheck14("0");
		tqf.setQuescheck15("0");
		tqf.setQuescheck16("0");
		tqf.setQuescheck17("0");
		tqf.setQuescheck18("0");
		tqf.setQuescheck19("0");
		tqf.setQuescheck20("0");
		tqf.setQuescheck21("0");
		tqf.setQuescheck22("0");
		tqf.setQuescheck23("0");
		tqf.setQuescheck24("0");
		tqf.setQuescheck25("0");
		tqf.setQuescheck26("0");
		tqf.setQuescheck27("0");
		tqf.setQuescheck28("0");
		tqf.setQuescheck29("0");
		tqf.setQuescheck30("0");
		tqf.setQuescheck31("0");
		tqf.setQuescheck32("0");
		tqf.setQuescheck33("0");
		tqf.setQuescheck34("0");
		tqf.setQuescheck35("0");
		tqf.setQuesvisible1("0");
		tqf.setQuesvisible2("0");
		tqf.setQuesvisible3("0");
		tqf.setQuesvisible4("0");
		tqf.setQuesvisible5("0");
		tqf.setQuesvisible6("0");
		tqf.setQuesvisible7("0");
		tqf.setQuesvisible8("0");
		tqf.setQuesvisible9("0");
		tqf.setQuesvisible10("0");
		tqf.setQuesvisible11("0");
		tqf.setQuesvisible12("0");
		tqf.setQuesvisible13("0");
		tqf.setQuesvisible14("0");
		tqf.setQuesvisible15("0");
		tqf.setQuesvisible16("0");
		tqf.setQuesvisible17("0");
		tqf.setQuesvisible18("0");
		tqf.setQuesvisible19("0");
		tqf.setQuesvisible20("0");
		tqf.setQuesvisible21("0");
		tqf.setQuesvisible22("0");
		tqf.setQuesvisible23("0");
		tqf.setQuesvisible24("0");
		tqf.setQuesvisible25("0");
		tqf.setQuesvisible26("0");
		tqf.setQuesvisible27("0");
		tqf.setQuesvisible28("0");
		tqf.setQuesvisible29("0");
		tqf.setQuesvisible30("0");
		tqf.setQuesvisible31("0");
		tqf.setQuesvisible32("0");
		tqf.setQuesvisible33("0");
		tqf.setQuesvisible34("0");
		tqf.setQuesvisible35("0");
		return tqf;
    }
	
	protected ActionForm buildUserDetailForm(int numTestId, HttpServletRequest request) throws Exception 
    {
		TestquestionForm tqf = new TestquestionForm();
		
		RootMaster rm = new RootMaster();
		Vector dataVec = rm.getTestQuestions(getDataSource(request, "corpo"), numTestId);
		////////System.out.println("dataVec "+dataVec.size());
		tqf.setTestid(String.valueOf(numTestId));
		tqf.setTestname(dataVec.elementAt(140).toString().trim());
		tqf.setTotalmarks(dataVec.elementAt(141).toString().trim());
		tqf.setTestremark(dataVec.elementAt(142).toString().trim());
		tqf.setTesttyp(dataVec.elementAt(143).toString().trim());
		tqf.setTestcategory(dataVec.elementAt(144).toString().trim());
		
		tqf.setQues1(dataVec.elementAt(0).toString().trim());
		tqf.setQues2(dataVec.elementAt(1).toString().trim());
		tqf.setQues3(dataVec.elementAt(2).toString().trim());
		tqf.setQues4(dataVec.elementAt(3).toString().trim());
		tqf.setQues5(dataVec.elementAt(4).toString().trim());
		tqf.setQues6(dataVec.elementAt(5).toString().trim());
		tqf.setQues7(dataVec.elementAt(6).toString().trim());
		tqf.setQues8(dataVec.elementAt(7).toString().trim());
		tqf.setQues9(dataVec.elementAt(8).toString().trim());
		tqf.setQues10(dataVec.elementAt(9).toString().trim());
		tqf.setQues11(dataVec.elementAt(10).toString().trim());
		tqf.setQues12(dataVec.elementAt(11).toString().trim());
		tqf.setQues13(dataVec.elementAt(12).toString().trim());
		tqf.setQues14(dataVec.elementAt(13).toString().trim());
		tqf.setQues15(dataVec.elementAt(14).toString().trim());
		tqf.setQues16(dataVec.elementAt(15).toString().trim());
		tqf.setQues17(dataVec.elementAt(16).toString().trim());
		tqf.setQues18(dataVec.elementAt(17).toString().trim());
		tqf.setQues19(dataVec.elementAt(18).toString().trim());
		tqf.setQues20(dataVec.elementAt(19).toString().trim());
		tqf.setQues21(dataVec.elementAt(20).toString().trim());
		tqf.setQues22(dataVec.elementAt(21).toString().trim());
		tqf.setQues23(dataVec.elementAt(22).toString().trim());
		tqf.setQues24(dataVec.elementAt(23).toString().trim());
		tqf.setQues25(dataVec.elementAt(24).toString().trim());
		tqf.setQues26(dataVec.elementAt(25).toString().trim());
		tqf.setQues27(dataVec.elementAt(26).toString().trim());
		tqf.setQues28(dataVec.elementAt(27).toString().trim());
		tqf.setQues29(dataVec.elementAt(28).toString().trim());
		tqf.setQues30(dataVec.elementAt(29).toString().trim());
		tqf.setQues31(dataVec.elementAt(30).toString().trim());
		tqf.setQues32(dataVec.elementAt(31).toString().trim());
		tqf.setQues33(dataVec.elementAt(32).toString().trim());
		tqf.setQues34(dataVec.elementAt(33).toString().trim());
		tqf.setQues35(dataVec.elementAt(34).toString().trim());
		tqf.setQuestype1(dataVec.elementAt(35).toString().trim());
		tqf.setQuestype2(dataVec.elementAt(36).toString().trim());
		tqf.setQuestype3(dataVec.elementAt(37).toString().trim());
		tqf.setQuestype4(dataVec.elementAt(38).toString().trim());
		tqf.setQuestype5(dataVec.elementAt(39).toString().trim());
		tqf.setQuestype6(dataVec.elementAt(40).toString().trim());
		tqf.setQuestype7(dataVec.elementAt(41).toString().trim());
		tqf.setQuestype8(dataVec.elementAt(42).toString().trim());
		tqf.setQuestype9(dataVec.elementAt(43).toString().trim());
		tqf.setQuestype10(dataVec.elementAt(44).toString().trim());
		tqf.setQuestype11(dataVec.elementAt(45).toString().trim());
		tqf.setQuestype12(dataVec.elementAt(46).toString().trim());
		tqf.setQuestype13(dataVec.elementAt(47).toString().trim());
		tqf.setQuestype14(dataVec.elementAt(48).toString().trim());
		tqf.setQuestype15(dataVec.elementAt(49).toString().trim());
		tqf.setQuestype16(dataVec.elementAt(50).toString().trim());
		tqf.setQuestype17(dataVec.elementAt(51).toString().trim());
		tqf.setQuestype18(dataVec.elementAt(52).toString().trim());
		tqf.setQuestype19(dataVec.elementAt(53).toString().trim());
		tqf.setQuestype20(dataVec.elementAt(54).toString().trim());
		tqf.setQuestype21(dataVec.elementAt(55).toString().trim());
		tqf.setQuestype22(dataVec.elementAt(56).toString().trim());
		tqf.setQuestype23(dataVec.elementAt(57).toString().trim());
		tqf.setQuestype24(dataVec.elementAt(58).toString().trim());
		tqf.setQuestype25(dataVec.elementAt(59).toString().trim());
		tqf.setQuestype26(dataVec.elementAt(60).toString().trim());
		tqf.setQuestype27(dataVec.elementAt(61).toString().trim());
		tqf.setQuestype28(dataVec.elementAt(62).toString().trim());
		tqf.setQuestype29(dataVec.elementAt(63).toString().trim());
		tqf.setQuestype30(dataVec.elementAt(64).toString().trim());
		tqf.setQuestype31(dataVec.elementAt(65).toString().trim());
		tqf.setQuestype32(dataVec.elementAt(66).toString().trim());
		tqf.setQuestype33(dataVec.elementAt(67).toString().trim());
		tqf.setQuestype34(dataVec.elementAt(68).toString().trim());
		tqf.setQuestype35(dataVec.elementAt(69).toString().trim());
		tqf.setQuescheck1(dataVec.elementAt(70).toString().trim());
		tqf.setQuescheck2(dataVec.elementAt(71).toString().trim());
		tqf.setQuescheck3(dataVec.elementAt(72).toString().trim());
		tqf.setQuescheck4(dataVec.elementAt(73).toString().trim());
		tqf.setQuescheck5(dataVec.elementAt(74).toString().trim());
		tqf.setQuescheck6(dataVec.elementAt(75).toString().trim());
		tqf.setQuescheck7(dataVec.elementAt(76).toString().trim());
		tqf.setQuescheck8(dataVec.elementAt(77).toString().trim());
		tqf.setQuescheck9(dataVec.elementAt(78).toString().trim());
		tqf.setQuescheck10(dataVec.elementAt(79).toString().trim());
		tqf.setQuescheck11(dataVec.elementAt(80).toString().trim());
		tqf.setQuescheck12(dataVec.elementAt(81).toString().trim());
		tqf.setQuescheck13(dataVec.elementAt(82).toString().trim());
		tqf.setQuescheck14(dataVec.elementAt(83).toString().trim());
		tqf.setQuescheck15(dataVec.elementAt(84).toString().trim());
		tqf.setQuescheck16(dataVec.elementAt(85).toString().trim());
		tqf.setQuescheck17(dataVec.elementAt(86).toString().trim());
		tqf.setQuescheck18(dataVec.elementAt(87).toString().trim());
		tqf.setQuescheck19(dataVec.elementAt(88).toString().trim());
		tqf.setQuescheck20(dataVec.elementAt(89).toString().trim());
		tqf.setQuescheck21(dataVec.elementAt(90).toString().trim());
		tqf.setQuescheck22(dataVec.elementAt(91).toString().trim());
		tqf.setQuescheck23(dataVec.elementAt(92).toString().trim());
		tqf.setQuescheck24(dataVec.elementAt(93).toString().trim());
		tqf.setQuescheck25(dataVec.elementAt(94).toString().trim());
		tqf.setQuescheck26(dataVec.elementAt(95).toString().trim());
		tqf.setQuescheck27(dataVec.elementAt(96).toString().trim());
		tqf.setQuescheck28(dataVec.elementAt(97).toString().trim());
		tqf.setQuescheck29(dataVec.elementAt(98).toString().trim());
		tqf.setQuescheck30(dataVec.elementAt(99).toString().trim());
		tqf.setQuescheck31(dataVec.elementAt(100).toString().trim());
		tqf.setQuescheck32(dataVec.elementAt(101).toString().trim());
		tqf.setQuescheck33(dataVec.elementAt(102).toString().trim());
		tqf.setQuescheck34(dataVec.elementAt(103).toString().trim());
		tqf.setQuescheck35(dataVec.elementAt(104).toString().trim());
		tqf.setQuesvisible1(dataVec.elementAt(105).toString().trim());
		tqf.setQuesvisible2(dataVec.elementAt(106).toString().trim());
		tqf.setQuesvisible3(dataVec.elementAt(107).toString().trim());
		tqf.setQuesvisible4(dataVec.elementAt(108).toString().trim());
		tqf.setQuesvisible5(dataVec.elementAt(109).toString().trim());
		tqf.setQuesvisible6(dataVec.elementAt(110).toString().trim());
		tqf.setQuesvisible7(dataVec.elementAt(111).toString().trim());
		tqf.setQuesvisible8(dataVec.elementAt(112).toString().trim());
		tqf.setQuesvisible9(dataVec.elementAt(113).toString().trim());
		tqf.setQuesvisible10(dataVec.elementAt(114).toString().trim());
		tqf.setQuesvisible11(dataVec.elementAt(115).toString().trim());
		tqf.setQuesvisible12(dataVec.elementAt(116).toString().trim());
		tqf.setQuesvisible13(dataVec.elementAt(117).toString().trim());
		tqf.setQuesvisible14(dataVec.elementAt(118).toString().trim());
		tqf.setQuesvisible15(dataVec.elementAt(119).toString().trim());
		tqf.setQuesvisible16(dataVec.elementAt(120).toString().trim());
		tqf.setQuesvisible17(dataVec.elementAt(121).toString().trim());
		tqf.setQuesvisible18(dataVec.elementAt(122).toString().trim());
		tqf.setQuesvisible19(dataVec.elementAt(123).toString().trim());
		tqf.setQuesvisible20(dataVec.elementAt(124).toString().trim());
		tqf.setQuesvisible21(dataVec.elementAt(125).toString().trim());
		tqf.setQuesvisible22(dataVec.elementAt(126).toString().trim());
		tqf.setQuesvisible23(dataVec.elementAt(127).toString().trim());
		tqf.setQuesvisible24(dataVec.elementAt(128).toString().trim());
		tqf.setQuesvisible25(dataVec.elementAt(129).toString().trim());
		tqf.setQuesvisible26(dataVec.elementAt(130).toString().trim());
		tqf.setQuesvisible27(dataVec.elementAt(131).toString().trim());
		tqf.setQuesvisible28(dataVec.elementAt(132).toString().trim());
		tqf.setQuesvisible29(dataVec.elementAt(133).toString().trim());
		tqf.setQuesvisible30(dataVec.elementAt(134).toString().trim());
		tqf.setQuesvisible31(dataVec.elementAt(135).toString().trim());
		tqf.setQuesvisible32(dataVec.elementAt(136).toString().trim());
		tqf.setQuesvisible33(dataVec.elementAt(137).toString().trim());
		tqf.setQuesvisible34(dataVec.elementAt(138).toString().trim());
		tqf.setQuesvisible35(dataVec.elementAt(139).toString().trim());
		
		return tqf;
    }
	public ActionForward execute(ActionMapping mapping, ActionForm form, HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException 
	{
		String target = "success";
		String strTyp = (request.getParameter("reqtyp")!=null) ? request.getParameter("reqtyp").trim() : "New";
		//////System.out.println("Request Type in test data "+strTyp);
		//String strTestTyp = (request.getParameter("testtyp")!=null) ? request.getParameter("testtyp").trim() : "Digital";
		try
		{
			if(strTyp.equalsIgnoreCase("New"))
			{
				form = buildUserForm();
			}
			else
			{
				String strTid = (request.getParameter("tstid")!=null) ? request.getParameter("tstid").trim() : "0";
				if(Integer.parseInt(strTid.trim())<=0)
				{
					form = buildUserForm();
				}
				else
				{
					form = buildUserDetailForm(Integer.parseInt(strTid.trim()), request);
				}
			}
			if("request".equals(mapping.getScope()) ) 
			{
				request.setAttribute(mapping.getAttribute(), form);
		    }
		    else 
		    {
		    	HttpSession session = request.getSession();
	        	session.setAttribute(mapping.getAttribute(), form);
		    }
		}
		catch(Exception e)
		{
			target = new String("failure");
		    ActionErrors errors = new ActionErrors();

		      errors.add(ActionErrors.GLOBAL_ERROR,
		        new ActionError("errors.database.error", e.getMessage()));

		      // Report any errors
		      if ( !errors.isEmpty() ) {

		        saveErrors(request, errors);
		      }
		}
		
		return (mapping.findForward(target));
	}
	
}