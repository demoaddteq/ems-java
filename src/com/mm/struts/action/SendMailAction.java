	/*
	 * Generated by MyEclipse Struts
	 * Template path: templates/java/JavaClass.vtl
	 */
	package com.mm.struts.action;
	import javax.servlet.http.HttpServletRequest;
	import javax.servlet.http.HttpServletResponse;	
	import org.apache.struts.action.Action;
	import org.apache.struts.action.ActionError;
	import org.apache.struts.action.ActionErrors;
	import org.apache.struts.action.ActionForm;
	import org.apache.struts.action.ActionForward;
	import org.apache.struts.action.ActionMapping;
	import com.mm.struts.form.SendMailForm;
	import com.mm.core.resource.Resource;



		public class SendMailAction extends Action {
		/*
		 * Generated Methods
		 */

		/** 
		 * Method execute
		 * @param mapping
		 * @param form
		 * @param request
		 * @param response
		 * @return ActionForward
		 */
		public ActionForward execute(ActionMapping mapping, ActionForm form,
				HttpServletRequest request, HttpServletResponse response) {
			SendMailForm mailform = (SendMailForm) form;// TODO Auto-generated method stub
			
			String fianlStatus="";	
			String Sub="Introducing CampusYogi";
			String strMailText="\nHi "+mailform.getRname().toString().trim()+"\n\n\n" ;
			strMailText+=""+mailform.getSname().toString().trim()+" has sent you the following invite:\n";
			strMailText+=mailform.getMessage().toString().trim()+"\n";
			strMailText+="===============================================================================\n\n";
			//strMailText+=""+mailform.getSname().toString().trim()+" Manoj Pareta has sent you the following invite:";
			//strMailText+="Write us a feedback or alternatively write to us at team@campus-connect.com to let us know your reviews.\n\n";
			
			strMailText+="Thanks\n\n";
			strMailText+="Team @ Campusyogi";
			
			Resource resr = new Resource();
			
			String strEmailStatus = resr.sendMail(strMailText, mailform.getSemail(),mailform.getRemail() , Sub);
			if(strEmailStatus.equalsIgnoreCase("success"))
			{
				ActionErrors msg = new ActionErrors();
				msg.clear();
				msg.add("delete", new ActionError("main.sendMail.mailsuccess"));
				
				saveErrors(request, msg);
				fianlStatus = "success";
			}
			else
			{
				ActionErrors msg = new ActionErrors();
				msg.clear();
				msg.add("delete", new ActionError("main.sendMail.mailfailure"));
				
				saveErrors(request, msg);
				fianlStatus = "failure";
			}
			
			return mapping.findForward(fianlStatus);
			
		}	
			
		

}